<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>S2RK</title>
  <!-- Include the CesiumJS JavaScript and CSS files -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.121/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.121/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <style>
    .video-container {
        width: 100%;
        max-width: 100%; /* Atur sesuai dengan kebutuhan web Anda */
        margin: 0 auto; /* Agar video terpusat di halaman */
    }

    .video-container video {
        width: 100%;
        height: auto;
        object-fit: contain; /* Menjaga rasio aspek video */
    }

    #cesiumContainer1 {
      width: 100%;
      height: 100vh;
    }
    .control-buttons {
      position: absolute;
      top: 220px;
      left: 40px;
      z-index: 10;
    }
    .cesium-button {
      display: block;
      margin: 5px;
      padding: 10px;
      background-color: #1a1b1b;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    .cesium-button.secondary {
      background-color: #6c757d;
    }
</style>
</head>
<body>
    

  <nav class="navbar bg-dark border-bottom border-body" data-bs-theme="dark">
    <div class="container">
      <h1 class="navbar-brand d-flex align-items-center" href="#">
        <img src="img/amgeoid.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top me-2">
        <span>Satu Sistem Referensi Kadaster <small>(S2RK)</small></span>
      </h1>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Proposal</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="3dwebgis.html">3D WebGIS</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

    <div class="video-container">
        <video src="data/3doblique.mp4" class="object-fit-contain" autoplay loop muted></video>
    </div>

    <img src="img/S2RK.png" class="img-fluid" alt="...">


    <div class="container my-5">
        <div class="card">
            <div class="card-body">
              <h2 class="card-title">Menangkap Realitas dari Sudut yang Berbeda</h2>
              <p class="card-text">Pemodelan 3D oblique photogrammetry adalah teknik canggih yang memungkinkan pembuatan model 3D dari objek atau area dengan sudut pandang miring (oblique), bukan hanya dari sudut vertikal atau ortogonal. Metode ini sangat efektif untuk menangkap detail yang kompleks dari bangunan, infrastruktur, dan lanskap, yang seringkali sulit dilihat dari sudut pandang tradisional. <br> <br> Pemodelan 3D oblique photogrammetry menghasilkan model yang sangat detail dan akurat, memungkinkan visualisasi dari sudut yang biasanya tidak terlihat dalam pemodelan tradisional. Ini membuka peluang baru dalam berbagai bidang, mulai dari arsitektur hingga pemetaan kota dan analisis lingkungan.</p>

            <img src="img/method.png" class="card-img-bottom" alt="...">
        </div>
    </div>

    <div class="container my-5">
        <div class="card">
            <div class="card-body">
              <h2 class="card-title">Membangun Dunia Digital yang Imersif</h2>
              <p class="card-text">Bayangkan sebuah dunia di mana batas antara realitas dan virtual berkomunikasi, di mana Anda dapat menjelajahi, berinteraksi, dan merasakan lingkungan digital seolah-olah Anda berada di sana secara langsung. Inilah esensi dari dunia digital yang imersif—sebuah pengalaman yang menggabungkan presisi teknologi 3D, photogrammetry, dan visualisasi canggih.</p>

            <div id="cesiumContainer"></div>
        </div>
    </div>

    <div class="container my-5">
      <div class="card">
          <div class="card-body">
            <h2 class="card-title">Selamat! Model 3D Photogrammetry Kini Lebih Interaktif</h2>
            <p class="card-text">Kami dengan bangga mengumumkan bahwa model 3D photogrammetry kami telah mendapatkan pembaruan besar. Kini, Anda dapat menikmati fitur interaktif yang baru, termasuk animasi kembang api yang memukau. Animasi ini tidak hanya menambah keseruan visual tetapi juga memberikan efek dinamis yang menyoroti keindahan model 3D. Selain itu, objek 3D dalam model dapat muncul dan menghilang secara mulus, memungkinkan Anda untuk mengeksplorasi detail dan aspek yang berbeda dari model dengan cara yang lebih menarik dan informatif. Kami berharap pembaruan ini akan meningkatkan pengalaman Anda dan memberikan pandangan yang lebih mendalam serta menyenangkan.</p>
          
          <div id="cesiumContainer1"></div>
          <div class="control-buttons">
            <button id="toggleModel" class="cesium-button">Show/Hide 3D Model</button>
            <button id="toggleFireworks" class="cesium-button">Show/Hide Fireworks</button>
             
          </div>
      </div>
  </div>

    <div class="container my-5">
    <div class="card">
        <div class="card-body">
          <h2 class="card-title">Transformasi Digital dengan Avatar 3D dalam Model Photogrammetry</h2>
          <p class="card-text">Temukan bagaimana teknologi avatar terkini berintegrasi dengan model 3D photogrammetry untuk menghadirkan pengalaman visual yang lebih interaktif dan realistis. Ciptakan dunia digital yang hidup dengan menggabungkan avatar Anda ke dalam lingkungan yang dirender secara akurat melalui photogrammetry.

        <span>Jelajahi Inovasi Kami dan Unduh Sekarang!</span></p>
        </div>
        <div class="card-group">
          <div class="card">
            <img src="img/thirdperson.jpeg" class="card-img-bottom" alt="...">
            <div class="card-body">
              <button type="button" class="btn btn-dark" id="download-btn">Download Sekarang!</button>
            </div>
          </div>
          <div class="card">
            <video src="data/avatar.mp4" class="object-fit-contain" autoplay loop muted></video>
    
          </div>
        </div>
        </div>
        
    </div>
    
    </div>

    

    <!-- Remove the container if you want to extend the Footer to full width. -->


    <!-- Footer -->
    <footer
            class="text-center text-lg-start text-white"
            style="background-color: #1c2331"
            >
      <!-- Section: Social media -->
      
      <section
               class="d-flex justify-content-between p-4"
               style="background-color: #6351ce"
               >
        <!-- Left -->
        <div class="me-5">
          <span>Get connected with us on social networks:</span>
        </div>
        <!-- Left -->
  
        <!-- Right -->
        <div>
          <a href="" class="text-white me-4">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-google"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="" class="text-white me-4">
            <i class="fab fa-github"></i>
          </a>
        </div>
        <!-- Right -->
      </section>
      <!-- Section: Social media -->
  
      <!-- Copyright -->
      <div
           class="text-center p-3"
           style="background-color: rgba(0, 0, 0, 0.2)"
           >
        © 2024 Copyright:
        <a class="text-white" href="ketuttomysuhari.github.io/s2rk"
           >ketuttomysuhari</a
          >
      </div>
      <!-- Copyright -->
    </footer>
    <!-- Footer -->
  

  <!-- End of .container -->


  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
  <script type="module">
    // Your access token can be found at: https://ion.cesium.com/tokens.
    // This is the default access token from your ion account

    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhYWQ4OWMzYS00MjA4LTQwMjMtODAzNy03OTBmNmU0YTExYzYiLCJpZCI6NzU1Miwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU0OTc2NjgwNn0.IznlFpdNxINwCo9A6W4lxynEEVXfOx4i4MHA7CaHshI';

    // Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.
    const viewer = new Cesium.Viewer('cesiumContainer', {
      terrain: Cesium.Terrain.fromWorldTerrain(),
    });    

    try {
        const tileset = await Cesium.Cesium3DTileset.fromIonAssetId(2719542);
        viewer.scene.primitives.add(tileset);
        viewer.zoomTo(tileset);
    } catch (error) {
        console.log(`Error loading tileset: ${error}`);
    } 

    // Fly the camera to San Francisco at the given longitude, latitude, and height.
    viewer.camera.flyTo({
      destination: Cesium.Cartesian3.fromDegrees(112.6248203, -7.9808313, 700),
      orientation: {
        heading: Cesium.Math.toRadians(0.0),
        pitch: Cesium.Math.toRadians(-15.0),
      }
    });

    // Add Cesium OSM Buildings, a global 3D buildings layer.
    // const buildingTileset = await Cesium.createOsmBuildingsAsync();
    // viewer.scene.primitives.add(buildingTileset);   
    const gajayana = viewer.entities.add({
  polygon: {
    hierarchy: Cesium.Cartesian3.fromDegreesArray([
      112.62406609055904,-7.973558512896389, 112.62406609055904, -7.973674590126393,
              112.6240447795737, -7.9738645346149895, 112.62402346858994, -7.974202213487459, 112.62376773677579,
              -7.974972542371219,
              112.62324561765377,
              -7.976006680235059,
              112.62417264548083,
              -7.976048889888219,
              112.6246201761565,
              -7.97636546214855,
              112.625291472171,
              -7.97658706258477,
              112.62595211269189,
              -7.975289115463937,
              112.62537671610903,
              -7.974571549434529,
              112.62406609055904,
              -7.973558512896389
    ]),
    height: 510,
    material: Cesium.Color.RED.withAlpha(0.5),
    outline: true,
    outlineColor: Cesium.Color.BLACK,
  },
});


    gajayana.name = "Stadion Gajayana";
    gajayana.description =
      '\
    <img\
      width="50%"\
      style="float:left; margin: 0 1em 1em 0;"\
      src="img/gajayana.jpeg"/>\
    <p>\
      Stadion Gajayana adalah stadion olahraga yang tepat di Kelurahan Kauman, Kecamatan Klojen, Kota Malang, Jawa Timur. Stadion Gajayana adalah stadion tertua di Indonesia. Stadion ini mulai menjadi pusat kota pada tahun 1924 hingga 1926. Lalu pada awal tahun 1990-an Gajayana renovasi, daya tampungnya menjadi ± 17.000 . Pada tahun 2007 area samping Stadion Gajayana menjadi MOG atau Mall Olympic Garden, rampung 2008. Stadion Gajayana yang baru, daya tampung 35.000 penonton. Stadion ini markas utama klub Arema Indonesia/Arema FC. Stadion ini juga markas klub sepak bola asal Kota Malang, yakni Persema Malang, Malang United, & NZR Sumbersari.\
    </p>\
    <p>\
      Source: \
      <a style="color: WHITE"\
        target="_blank"\
        href="https://id.wikipedia.org/wiki/Stadion_Gajayana">Wikpedia</a>\
    </p>'; 
  </script>


<script>
  Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhYWQ4OWMzYS00MjA4LTQwMjMtODAzNy03OTBmNmU0YTExYzYiLCJpZCI6NzU1Miwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU0OTc2NjgwNn0.IznlFpdNxINwCo9A6W4lxynEEVXfOx4i4MHA7CaHshI';

  const viewer = new Cesium.Viewer('cesiumContainer1', {
    terrain: Cesium.Terrain.fromWorldTerrain(),
    shouldAnimate: true,
  });

  let modelVisible = true;
  let fireworksVisible = false;
  let fireworksParticles = [];
  let tileset = null;

  async function loadModel() {
    if (tileset) {
      viewer.scene.primitives.remove(tileset);
      tileset = null;  // Clear the reference
    }
    try {
      tileset = await Cesium.Cesium3DTileset.fromIonAssetId(2719542);
      viewer.scene.primitives.add(tileset);
      viewer.zoomTo(tileset);

      viewer.camera.flyTo({
        destination: Cesium.Cartesian3.fromDegrees(112.6248203, -7.9808313, 700),
        orientation: {
          heading: Cesium.Math.toRadians(0.0),
          pitch: Cesium.Math.toRadians(-15.0),
        }
      });

      console.log("Model loaded successfully.");
    } catch (error) {
      console.error(`Error loading tileset: ${error}`);
    }
  }

  function setupFireworks() {
    fireworksParticles.forEach(particle => viewer.scene.primitives.remove(particle));
    fireworksParticles = [];

    Cesium.Math.setRandomNumberSeed(315);
    const modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(
      Cesium.Cartesian3.fromDegrees(112.6238203, -7.9747313, 500)
    );
    const emitterInitialLocation = new Cesium.Cartesian3(0.0, 0.0, 100.0);

    let particleCanvas;

    function getImage() {
      if (!Cesium.defined(particleCanvas)) {
        particleCanvas = document.createElement('canvas');
        particleCanvas.width = 20;
        particleCanvas.height = 20;
        const context2D = particleCanvas.getContext('2d');
        context2D.beginPath();
        context2D.arc(8, 8, 8, 0, Cesium.Math.TWO_PI, true);
        context2D.closePath();
        context2D.fillStyle = 'rgb(255, 255, 255)';
        context2D.fill();
      }
      return particleCanvas;
    }

    const minimumExplosionSize = 30.0;
    const maximumExplosionSize = 100.0;
    const particlePixelSize = new Cesium.Cartesian2(7.0, 7.0);
    const burstSize = 400.0;
    const lifetime = 10.0;
    const numberOfFireworks = 20.0;

    const emitterModelMatrixScratch = new Cesium.Matrix4();

    function createFirework(offset, color, bursts) {
      const position = Cesium.Cartesian3.add(
        emitterInitialLocation,
        offset,
        new Cesium.Cartesian3()
      );
      const emitterModelMatrix = Cesium.Matrix4.fromTranslation(
        position,
        emitterModelMatrixScratch
      );
      const particleToWorld = Cesium.Matrix4.multiply(
        modelMatrix,
        emitterModelMatrix,
        new Cesium.Matrix4()
      );
      const worldToParticle = Cesium.Matrix4.inverseTransformation(
        particleToWorld,
        particleToWorld
      );

      const size = Cesium.Math.randomBetween(
        minimumExplosionSize,
        maximumExplosionSize
      );
      const particlePositionScratch = new Cesium.Cartesian3();
      const force = function (particle) {
        const position = Cesium.Matrix4.multiplyByPoint(
          worldToParticle,
          particle.position,
          particlePositionScratch
        );
        if (Cesium.Cartesian3.magnitudeSquared(position) >= size * size) {
          Cesium.Cartesian3.clone(
            Cesium.Cartesian3.ZERO,
            particle.velocity
          );
        }
      };

      const normalSize =
        (size - minimumExplosionSize) /
        (maximumExplosionSize - minimumExplosionSize);
      const minLife = 0.3;
      const maxLife = 1.0;
      const life = normalSize * (maxLife - minLife) + minLife;

      const particleSystem = new Cesium.ParticleSystem({
        image: getImage(),
        startColor: color,
        endColor: color.withAlpha(0.0),
        particleLife: life,
        speed: 100.0,
        imageSize: particlePixelSize,
        emissionRate: 0,
        emitter: new Cesium.SphereEmitter(0.1),
        bursts: bursts,
        lifetime: lifetime,
        updateCallback: force,
        modelMatrix: modelMatrix,
        emitterModelMatrix: emitterModelMatrix,
      });

      viewer.scene.primitives.add(particleSystem);
      fireworksParticles.push(particleSystem);
    }

    const xMin = -100.0;
    const xMax = 100.0;
    const yMin = -80.0;
    const yMax = 100.0;
    const zMin = -50.0;
    const zMax = 50.0;

    const colorOptions = [
      {
        minimumRed: 0.75,
        green: 0.0,
        minimumBlue: 0.8,
        alpha: 1.0,
      },
      {
        red: 0.0,
        minimumGreen: 0.75,
        minimumBlue: 0.8,
        alpha: 1.0,
      },
      {
        red: 0.0,
        green: 0.0,
        minimumBlue: 0.8,
        alpha: 1.0,
      },
      {
        minimumRed: 0.75,
        minimumGreen: 0.75,
        blue: 0.0,
        alpha: 1.0,
      },
    ];

    for (let i = 0; i < numberOfFireworks; ++i) {
      const x = Cesium.Math.randomBetween(xMin, xMax);
      const y = Cesium.Math.randomBetween(yMin, yMax);
      const z = Cesium.Math.randomBetween(zMin, zMax);
      const offset = new Cesium.Cartesian3(x, y, z);
      const color = Cesium.Color.fromRandom(
        colorOptions[i % colorOptions.length]
      );

      const bursts = [];
      for (let j = 0; j < 3; ++j) {
        bursts.push(
          new Cesium.ParticleBurst({
            time: Cesium.Math.nextRandomNumber() * lifetime,
            minimum: burstSize,
            maximum: burstSize,
          })
        );
      }

      createFirework(offset, color, bursts);
    }
  }

  document.getElementById('toggleModel').addEventListener('click', async function () {
    if (modelVisible) {
      if (tileset) {
        viewer.scene.primitives.remove(tileset);
        tileset = null;  // Clear the reference
      }
      modelVisible = false;
    } else {
      if (!tileset) {
        await loadModel();
      } else {
        viewer.scene.primitives.add(tileset);
      }
      modelVisible = true;
    }
  });

  document.getElementById('toggleFireworks').addEventListener('click', function () {
    if (fireworksVisible) {
      fireworksParticles.forEach(particle => viewer.scene.primitives.remove(particle));
      fireworksParticles = [];
      fireworksVisible = false;
    } else {
      setupFireworks();
      fireworksVisible = true;
    }
  });

  // Load model and setup fireworks initially
  loadModel().then(setupFireworks);
</script>
<script>
  document.getElementById('download-btn').addEventListener('click', function() {
      // URL file yang akan diunduh
      var fileUrl = 'data/Third Person Game.zip';

      // Buat elemen <a> sementara
      var a = document.createElement('a');
      a.href = fileUrl;
      a.download = fileUrl.split('/').pop(); // Nama file untuk disimpan

      // Tambahkan elemen <a> ke body dan trigger klik
      document.body.appendChild(a);
      a.click();

      // Hapus elemen <a> setelah klik
      document.body.removeChild(a);
  });
</script>
 </div>
</body>
</html>
